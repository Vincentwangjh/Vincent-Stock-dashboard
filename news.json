<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>A股情报中心 - Vincent Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #050816;
      --bg-card: #0b1020;
      --accent: #3b82f6;
      --positive: #22c55e;
      --negative: #ef4444;
      --neutral: #9ca3af;
      --text-main: #f9fafb;
      --text-sub: #9ca3af;
      --border-subtle: #1f2937;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui, -apple-system, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #111827 0, #020617 40%, #000 100%);
      color: var(--text-main);
      min-height: 100vh;
    }

    .page {
      max-width: 1100px;
      margin: 0 auto;
      padding: 24px 16px 40px;
    }

    .header {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 24px;
    }

    .title-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }

    .title {
      font-size: 24px;
      font-weight: 700;
      letter-spacing: 0.03em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .badge-live {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(56, 189, 248, 0.15);
      border: 1px solid rgba(56, 189, 248, 0.6);
      color: #7dd3fc;
    }

    .subtitle {
      font-size: 13px;
      color: var(--text-sub);
    }

    .meta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 8px;
      font-size: 12px;
      color: var(--text-sub);
    }

    .meta-chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid var(--border-subtle);
    }

    .meta-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--accent);
    }

    .overview-card {
      margin-top: 16px;
      margin-bottom: 16px;
      padding: 14px 14px;
      border-radius: 16px;
      background: radial-gradient(circle at top left, rgba(37, 99, 235, 0.35), transparent 55%),
                  radial-gradient(circle at bottom right, rgba(16, 185, 129, 0.28), transparent 55%),
                  rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(148, 163, 184, 0.22);
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.8);
      font-size: 13px;
      color: #e5e7eb;
    }

    .overview-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .overview-body {
      opacity: 0.9;
      line-height: 1.5;
    }

    .stocks-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
      margin-top: 12px;
    }

    .stock-card {
      border-radius: 18px;
      background: radial-gradient(circle at top left, rgba(59, 130, 246, 0.16), transparent 60%),
                  radial-gradient(circle at bottom right, rgba(8, 47, 73, 0.7), rgba(15, 23, 42, 0.96));
      border: 1px solid rgba(31, 41, 55, 0.9);
      padding: 14px 14px;
      box-shadow: 0 14px 30px rgba(15, 23, 42, 0.95);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .stock-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 8px;
    }

    .stock-main {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .stock-name {
      font-size: 16px;
      font-weight: 600;
    }

    .stock-code {
      font-size: 12px;
      color: var(--text-sub);
    }

    .stock-sector {
      font-size: 11px;
      color: var(--text-sub);
    }

    .sentiment-pill {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .sentiment-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
    }

    .sentiment-positive {
      background: rgba(34, 197, 94, 0.12);
      border: 1px solid rgba(34, 197, 94, 0.7);
      color: #bbf7d0;
    }

    .sentiment-positive .sentiment-dot {
      background: var(--positive);
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.8);
    }

    .sentiment-negative {
      background: rgba(239, 68, 68, 0.12);
      border: 1px solid rgba(239, 68, 68, 0.7);
      color: #fecaca;
    }

    .sentiment-negative .sentiment-dot {
      background: var(--negative);
      box-shadow: 0 0 10px rgba(239, 68, 68, 0.8);
    }

    .sentiment-neutral {
      background: rgba(148, 163, 184, 0.18);
      border: 1px solid rgba(148, 163, 184, 0.7);
      color: #e5e7eb;
    }

    .sentiment-neutral .sentiment-dot {
      background: var(--neutral);
    }

    .summary {
      font-size: 12px;
      color: var(--text-main);
      opacity: 0.9;
      line-height: 1.5;
    }

    .action-hint {
      font-size: 12px;
      color: #a5b4fc;
      background: radial-gradient(circle at left, rgba(129, 140, 248, 0.2), transparent 60%);
      border-radius: 12px;
      padding: 8px 10px;
      border: 1px solid rgba(129, 140, 248, 0.4);
    }

    .action-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #c7d2fe;
      opacity: 0.8;
      margin-bottom: 2px;
    }

    .news-list {
      margin-top: 6px;
      border-top: 1px dashed rgba(55, 65, 81, 0.8);
      padding-top: 6px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .news-item {
      font-size: 11px;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .news-headline-row {
      display: flex;
      justify-content: space-between;
      gap: 6px;
      align-items: center;
    }

    .news-headline {
      flex: 1;
      color: #e5e7eb;
    }

    .news-impact {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid;
      white-space: nowrap;
    }

    .impact-positive {
      color: #4ade80;
      border-color: rgba(34, 197, 94, 0.7);
      background: rgba(22, 163, 74, 0.16);
    }

    .impact-negative {
      color: #fb7185;
      border-color: rgba(248, 113, 113, 0.7);
      background: rgba(127, 29, 29, 0.25);
    }

    .impact-neutral {
      color: #e5e7eb;
      border-color: rgba(148, 163, 184, 0.7);
      background: rgba(31, 41, 55, 0.7);
    }

    .news-meta {
      font-size: 10px;
      color: var(--text-sub);
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    .news-tag {
      opacity: 0.9;
    }

    .footer {
      margin-top: 24px;
      font-size: 10px;
      color: var(--text-sub);
      opacity: 0.75;
    }

    .footer span {
      opacity: 0.9;
    }

    @media (max-width: 640px) {
      .page {
        padding: 16px 12px 28px;
      }
      .title {
        font-size: 20px;
      }
      .overview-card {
        font-size: 12px;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <header class="header">
      <div class="title-row">
        <div class="title">
          A股情报中心
          <span class="badge-live">603986 · 688627 · Beta</span>
        </div>
      </div>
      <div class="subtitle">
        为你的自选股汇总每日新闻、行业信号，并给出「正/负向」直觉和操作提示。
      </div>
      <div class="meta-row">
        <div class="meta-chip">
          <span class="meta-dot"></span>
          <span id="lastUpdated">最后更新：加载中…</span>
        </div>
        <div class="meta-chip">
          <span>数据来源：公开资讯 + 手工更新</span>
        </div>
      </div>
    </header>

    <section id="overviewSection" class="overview-card" style="display:none;">
      <div class="overview-title">今日整体判断</div>
      <div id="overviewText" class="overview-body"></div>
    </section>

    <main class="stocks-grid" id="stocksContainer">
      <!-- JS 渲染 -->
    </main>

    <footer class="footer">
      <div>提示：这是个人研究用 Dashboard，仅做辅助决策，不构成投资建议。</div>
      <div>更新方式：每天只需在 GitHub 仓库里编辑 <span>news.json</span> 即可，无需改动本页面代码。</div>
    </footer>
  </div>

  <script>
    async function loadNews() {
      const lastUpdatedEl = document.getElementById("lastUpdated");
      const overviewSection = document.getElementById("overviewSection");
      const overviewTextEl = document.getElementById("overviewText");
      const container = document.getElementById("stocksContainer");

      try {
        const res = await fetch("news.json?_=" + Date.now());
        if (!res.ok) {
          throw new Error("HTTP " + res.status);
        }
        const data = await res.json();

        if (data.lastUpdated) {
          lastUpdatedEl.textContent = "最后更新：" + data.lastUpdated;
        }

        if (data.overview && data.overview.trim() !== "") {
          overviewTextEl.textContent = data.overview;
          overviewSection.style.display = "block";
        }

        container.innerHTML = "";

        (data.stocks || []).forEach((stock) => {
          const card = document.createElement("article");
          card.className = "stock-card";

          const header = document.createElement("div");
          header.className = "stock-header";

          const main = document.createElement("div");
          main.className = "stock-main";

          const nameEl = document.createElement("div");
          nameEl.className = "stock-name";
          nameEl.textContent = stock.name || "";

          const codeEl = document.createElement("div");
          codeEl.className = "stock-code";
          codeEl.textContent = (stock.ticker || "") + " · " + (stock.exchange || "");

          const sectorEl = document.createElement("div");
          sectorEl.className = "stock-sector";
          sectorEl.textContent = stock.sector || "";

          main.appendChild(nameEl);
          main.appendChild(codeEl);
          main.appendChild(sectorEl);

          const sentimentEl = document.createElement("div");
          const sentiment = (stock.sentiment || "neutral").toLowerCase();
          let sentimentText = "中性";
          let sentimentClass = "sentiment-neutral";

          if (sentiment === "positive") {
            sentimentText = "整体偏多";
            sentimentClass = "sentiment-positive";
          } else if (sentiment === "negative") {
            sentimentText = "整体偏空/谨慎";
            sentimentClass = "sentiment-negative";
          }

          sentimentEl.className = "sentiment-pill " + sentimentClass;
          sentimentEl.innerHTML = '<span class="sentiment-dot"></span><span>' + sentimentText + "</span>";

          header.appendChild(main);
          header.appendChild(sentimentEl);

          const summaryEl = document.createElement("div");
          summaryEl.className = "summary";
          summaryEl.textContent = stock.summary || "";

          const actionEl = document.createElement("div");
          actionEl.className = "action-hint";
          const label = document.createElement("div");
          label.className = "action-label";
          label.textContent = "今日操作思路";
          const text = document.createElement("div");
          text.textContent = stock.action || "";
          actionEl.appendChild(label);
          actionEl.appendChild(text);

          const newsList = document.createElement("div");
          newsList.className = "news-list";

          (stock.news || []).forEach((item) => {
            const newsItem = document.createElement("div");
            newsItem.className = "news-item";

            const row = document.createElement("div");
            row.className = "news-headline-row";

            const headline = document.createElement("div");
            headline.className = "news-headline";
            headline.textContent = item.title || "";

            const impactEl = document.createElement("div");
            const impact = (item.impact || "neutral").toLowerCase();
            let impactClass = "impact-neutral";
            let impactText = "中性";

            if (impact === "positive") {
              impactClass = "impact-positive";
              impactText = "利好";
            } else if (impact === "negative") {
              impactClass = "impact-negative";
              impactText = "利空/警惕";
            }

            impactEl.className = "news-impact " + impactClass;
            impactEl.textContent = impactText;

            row.appendChild(headline);
            row.appendChild(impactEl);

            const meta = document.createElement("div");
            meta.className = "news-meta";

            if (item.source) {
              const src = document.createElement("span");
              src.className = "news-tag";
              src.textContent = "来源：" + item.source;
              meta.appendChild(src);
            }

            if (item.comment) {
              const c = document.createElement("span");
              c.className = "news-tag";
              c.textContent = "解读：" + item.comment;
              meta.appendChild(c);
            }

            newsItem.appendChild(row);
            newsItem.appendChild(meta);

            newsList.appendChild(newsItem);
          });

          card.appendChild(header);
          card.appendChild(summaryEl);
          card.appendChild(actionEl);
          card.appendChild(newsList);

          container.appendChild(card);
        });
      } catch (err) {
        console.error("加载 news.json 失败", err);
        lastUpdatedEl.textContent = "最后更新：加载 news.json 失败，请确认文件存在且 JSON 格式正确。";
      }
    }

    loadNews();
  </script>
</body>
</html>
